(this.webpackJsonpappAdmin=this.webpackJsonpappAdmin||[]).push([[15],{775:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return E}));var n=r(22),a=r.n(n),c=r(39),s=r(783),u=r(45),o=r(54),i=r(55),l=r(57),p=r(56),h=r(58),d=r(0),f=r.n(d),b=r(741),y=r(742),m=r(743),O=r(744),v=r(115),g=r(734),j=r(17),_=r(745);r(770);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var w={},E=function(e){function t(e){var r;return Object(o.a)(this,t),(r=Object(l.a)(this,Object(p.a)(t).call(this,e))).toggleCollapsed=function(){var e=r.state,t=e.collapsed,n=e.openKeys,a=e.tempOpenKeys;t?r.setState({openKeys:a}):(r.setState({tempOpenKeys:n}),r.onOpenChange([])),r.setState({collapsed:!t})},r.onOpenChange=function(e){r.setState({openKeys:e})},r.handle_push=function(e,t){var n=e.path,a=r.state.selectedKeys;r.setState({currentMenu:e}),a!==n&&(r.props.history.push(n),r.setState({selectedKeys:n}))},r.state={collapsed:!1,isHide:!1,selectedKeys:e.location.pathname,openKeys:[],tempOpenKeys:[],routers:[],bread_crumb:[],currentMenu:{}},r}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getMenus()}},{key:"recursive_filter_routers_authority",value:function(e,t,r){var n=this,a=[];return t.forEach((function(t){if(e.includes(t.code)){t.component=t.path.replace("/","");var c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);r&&(c.path=r+c.path),c.children&&(c.children=n.recursive_filter_routers_authority(e,c.children,c.path)),a.push(c)}})),console.log(a),a}},{key:"recursive_bread_crumb",value:function(e){var t=this,r=arguments;return e.forEach((function(e){var n=Object(s.a)(r);n=(n=n[1])?[].concat(Object(s.a)(n),[e]):[e],e.children?t.recursive_bread_crumb(e.children,n):w[e.path]={bread:Object(s.a)(n.map((function(e){return e.name}))),path:Object(s.a)(n.slice(0,n.length-1).map((function(e){return e.path}))),currentMenu:e}})),w}},{key:"getMenus",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,n,c,s,u,o,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,console.log(t),e.next=4,Object(v.a)({url:"/admin/authMenu/allList",method:"post"});case 4:if("0"===(r=e.sent).code){e.next=7;break}return e.abrupt("return");case 7:n={id:"id",parentId:"parentId",name:"name"},c=r.data,(s=Object(j.i)()).includes("sy")?(s=s.filter((function(e){return"sy"!=e}))).unshift("sy"):s.unshift("sy"),u=[],c.map((function(e){s.includes(e.code)&&0!==e.parentId&&u.push(e.parentId)})),c.map((function(e){u.includes(e.id)&&s.push(e.code)})),o=Object(g.a)(c,0,n),i=this.recursive_filter_routers_authority(s,o),(l=this.recursive_bread_crumb(i))&&l.length>0&&this.setState({routers:i,bread_crumb:l,openKeys:l[t.location.pathname].path,currentMenu:l[t.location.pathname].currentMenu});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.collapsed,r=e.openKeys,n=e.selectedKeys,a=e.routers,c=e.bread_crumb,s=e.currentMenu;return f.a.createElement(_.default.Provider,{value:s},f.a.createElement("div",{className:"layout"},f.a.createElement(b.default,{collapsed:t,selectedKeys:n,openKeys:r,onOpenChange:this.onOpenChange,handle_push:this.handle_push,routers:a}),f.a.createElement("div",{className:t?"layout-right layout-switch":"layout-right"},f.a.createElement(y.default,{toggleCollapsed:this.toggleCollapsed,collapsed:t,selectedKeys:n,bread_crumb:c}),f.a.createElement(O.default,{routers:a}),f.a.createElement(m.default,null))))}}]),t}(f.a.Component)}}]);