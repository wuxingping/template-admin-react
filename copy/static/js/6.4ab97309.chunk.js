(this.webpackJsonpappAdmin=this.webpackJsonpappAdmin||[]).push([[6],{731:function(e,t,a){"use strict";var n=a(22),r=a.n(n),i=(a(738),a(737)),l=a(728),c=a(39),o=(a(90),a(35)),u=a(45),s=(a(285),a(196)),d=a(0),p=a.n(d),m=(a(89),a(27)),f=(a(730),a(729)),b=a(192);var A=function(e){var t=e.modalList,a=e.option,n=e.title,r=Object(d.useState)(!1),i=Object(l.a)(r,2),c=(i[0],i[1]);return p.a.createElement("div",null,p.a.createElement(f.a,{labelAlign:"right",labelCol:{span:6},wrapperCol:{span:14}},p.a.createElement("div",{className:"cm-flex cm-jc-sa"},p.a.createElement("div",{className:"cm-flex-column"},t.map((function(e,t){if("Editor"!==e.renderType)return e.updateRenderType&&(e.renderType=e.updateRenderType),p.a.createElement(f.a.Item,{label:e.label,required:e.require,key:t,style:{display:"flex"}},Object(b.g)(e,a,c))})),"\u67e5\u770b"!==n?p.a.createElement(m.a,{style:{alignSelf:"center"},onClick:e.submit,type:"primary"},"\u63d0\u4ea4"):null),p.a.createElement("div",null,t.map((function(e,t){if("Editor"===e.renderType)return p.a.createElement("div",null,Object(b.g)(e,a,c))}))))))},O=(a(290),a(197)),y=a(82),h=a(105),j=(a(195),a(193),a(168),a(194)),g=(a(286),a(287),a(81));function v(e,t,a){Object(g.d)(e,a,t,(function(a){if(Array.isArray(e.title.field)){var n=[];e.title.field.map((function(e){n.push(t[e])})),Object(j.a)(a.result,e.title.text,n)}else Object(j.a)(a.result,e.title.text)}))}function w(e,t,a){var n=e.getList;(0,e.setCurrent)(1),n(a)}function E(e,t){var a=e.getList;(0,e.setCurrent)(1),a({}),t({})}function k(e,t,a){var n=this,r=t.openAddModal,i=[];return e.map((function(e){"add"===e.status&&(e.type="primary",e.do=r,i.push(e)),"query"===e.status&&(e.type="dashed",e.do=w.bind(n,t),i.push(e),i.push({type:"danger",name:"\u91cd\u7f6e",do:E.bind(n,t,a)})),"import"===e.status&&i.push(e),"export"===e.status&&(e.type="dashed",e.do=v.bind(t.modalList),i.push(e))})),i}var S=p.a.forwardRef((function(e,t){var a=e.modalList.filter((function(e){return e.isSearch})),n={DING_TOKEN:Object(h.a)()},r=Object(d.useState)({}),i=Object(l.a)(r,2),c=i[0],u=i[1],s=Object(d.useState)(!1),A=Object(l.a)(s,2),j=(A[0],A[1]),g=k(e.actions,e,u);return Object(d.useImperativeHandle)(t,(function(){return{option:c}})),p.a.createElement("div",null,a.length>0?p.a.createElement("div",{className:"cm-mb-01"},p.a.createElement(f.a,{layout:"inline"},a.map((function(e,t){return p.a.createElement(f.a.Item,{label:e.label,key:t},Object(b.g)(e,c,j))})))):null,g.map((function(e,t){return"import"===e.status?p.a.createElement(O.a,{key:t,name:"file",showUploadList:!1,action:y.a+e.url,accept:"excel",headers:n,onChange:function(e){return function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(o.b.success("\u6587\u4ef6\u5bfc\u5165\u6210\u529f"),w.bind(this)):"error"===e.file.status&&o.b.error("\u6587\u4ef6\u5bfc\u5165\u5931\u8d25")}(e)}},p.a.createElement(m.a,{style:{background:"#52C41A",color:"#fff"}},"\u5bfc\u5165")):p.a.createElement(m.a,{type:e.type,key:t,className:"cm-mr-01",onClick:function(){return e.do(e,c)}},e.name)})))})),C=(a(288),a(198)),x=(a(735),a(739)),N=(a(289),a(199)),F=a(37),R=a.n(F),I="YYYY-MM-DD",L=1;function T(){return(T=Object(c.a)(r.a.mark((function e(t,a,n,i){var l,c,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.id,c=n.sourceApi,o=c.url,u=c.method,a.isShow=Number(t),t=Number(t),e.next=6,Object(g.f)({url:o,method:u,data:{isShow:t,id:l}});case 6:if("0"===e.sent.code){e.next=9;break}return e.abrupt("return");case 9:i((function(e){return!e}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e,t,a){var n=[];return e.map((function(e){var t=function(t){return"\u5e8f\u53f7"===e.label?p.a.createElement("span",null,L++):Array.isArray(t)&&e.keyValueField?p.a.createElement("div",null,t.map((function(t,a){return p.a.createElement("span",{key:a},t[e.keyValueField[1]],"\xa0")}))):p.a.createElement("span",null,t)},r=e.renderType;"Upload"===r&&(t=function(e){return p.a.createElement("img",{src:e,style:{width:"160px",height:"90px"},alt:""})}),"Radio"===r&&Array.isArray(e.radioOptions)?t=function(t){return p.a.createElement("div",null,function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if(n.key==t)return n.label}}(e.radioOptions,Number(t)))}:"Tag"===r?t=function(t){return function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if(n.key==t)return p.a.createElement(N.a,{color:n.color},n.label)}}(e.radioOptions,Number(t))}:"Popover"===r?t=function(t,a){return p.a.createElement(x.a,{content:a[e.linkField],title:"Link"},p.a.createElement(N.a,{color:"blue"},p.a.createElement("a",{href:a[e.linkField]},a[e.field])))}:"Switch"===r?t=function(t,n){return p.a.createElement(C.a,{checked:!!n[e.field],onChange:function(t){return function(e,t,a,n){return T.apply(this,arguments)}(t,n,e,a)}})}:"Picker"===r?t=function(t,a){return R()(t).format(e.format||I)}:"MultipleField"===r&&(t=function(t,a){return console.log(a[e.field]),p.a.createElement("div",null,a[e.field]&&Array.isArray(a[e.field])&&a[e.field].map((function(t,n){return p.a.createElement("span",{key:n},t[e.keyValueField[1]],p.a.createElement("span",null,a[e.field].length-1!==n?e.splitKey:" "))})))}),n.push({title:e.label,dataIndex:e.field,key:e.field,width:e.width,render:t})})),t&&t.length&&t.length>0&&n.push({title:"\u64cd\u4f5c",dataIndex:"button",render:function(e,a){return t.map((function(e,t){if("copy"===e.status){a[e.linkField];return p.a.createElement(x.a,{content:a[e.linkField],title:"Link"},p.a.createElement(m.a,{type:e.type,icon:e.icon,key:t,className:"cm-mr-02 btn",onClick:function(){return e.do(e,a)}},e.name))}return p.a.createElement(m.a,{type:e.type,icon:e.icon,key:t,className:"cm-mr-02",onClick:function(){return e.do(e,a)}},e.name)}))}}),L=1,n},U=a(732),q=a.n(U),P=a(734);var B=function(e){var t=e.modalList,a=e.visible,n=e.title,r=e.option,i=e.onOk,l=e.onCancel,c=e.setRefresh,o=e.labelCol,u=e.wrapperCol;return p.a.createElement(s.a,{title:n,visible:a,onOk:i,onCancel:l},p.a.createElement(f.a,{labelAlign:"right",labelCol:{span:o||8},wrapperCol:{span:u||16}},t.map((function(e,t){return p.a.createElement(f.a.Item,{required:e.require,label:e.label,key:t,help:e.help},Object(b.g)(e,r,c))}))))},V=a(736),Y=a.n(V),K=a(786),J=a(787),M=a(788),z=a(785),Q=a(726);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=s.a.confirm;function H(e,t,a){t.queryData?X(a,e,t,t.queryData):X(a,e,t,{})}function X(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=a.actions,l=a.modalList,c=i.filter((function(e){return"query"===e.status}))[0];Object(g.e)(c,l,n,r,(function(n){var r,i;a.isTreeTable?t((r=n.dataSource,i=a.keys,Object(P.a)(r,i.topId,i))):(t(n.dataSource),e&&e(n.count))}))}function _(e){return p.a.createElement("div",{style:{marginLeft:"25px",color:"#1890ff"}},"\u4e00\u5171\u6709\u3010",e,"\u3011\u6761\u6570\u636e")}function $(e,t,a,n,r,i,l){var c=e.current.option||{};r(l),X(a,n,t,c,{pageCount:l,pageSize:i},l)}function ee(e,t,a,n,r,i,l){e.showDetail?t(!0):a(!0);var c=Object.keys(l);c&&c.length>0?(n("\u63d2\u5165"),i.data&&Array.isArray(i.data)&&i.data.map((function(e){var t=e.field,a=e.updateField;r((function(e){return e[a]=l[t],JSON.parse(JSON.stringify(e))}))}))):(n("\u65b0\u589e"),r({}))}function te(e,t,a,n){e(!0),t((function(e){for(var t in n)e[t]=n[t];return JSON.parse(JSON.stringify(e))}))}function ae(e,t,a,n,r,i,l){var c=e.editCB,o=e.showDetail;c&&c(l,i,this),n("\u7f16\u8f91"),o?t(!0):a(!0),r((function(e){for(var t in l)e[t]=l[t];return JSON.parse(JSON.stringify(e))}))}function ne(e,t,a,n,r){var i=e.modalList,l=e.delData;Z({title:"Are you sure delete this task?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(g.b)(n,i,W({},r,{},l),(function(){o.b.success("\u5220\u9664\u6210\u529f"),H(t,e,a)}))},onCancel:function(){}})}function re(e,t,a,n,r,i,l,c,u,s,d){var p=r.actions,m=r.modalList,f={};"\u65b0\u589e"===e?(f=p.filter((function(e){return"add"===e.status}))[0],Object(g.a)(f,m,t,(function(){c(!1),u(!1),i(1),H(s,r,d),o.b.success("\u6dfb\u52a0\u6210\u529f")}))):"\u63d2\u5165"===e?(f=p.filter((function(e){return"insert"===e.status}))[0],Object(g.c)(f,m,t,(function(){u(!1),a?(c(!1),X(d,s,r,{},{pageCount:n,pageSize:l},n)):X(d,s,r,{},{pageCount:n,pageSize:l},n),o.b.success("\u63d2\u5165\u6210\u529f")}))):"\u7f16\u8f91"===e&&(f=p.filter((function(e){return"update"===e.status}))[0],Object(g.c)(f,m,t,(function(){u(!1),a?(c(!1),X(d,s,r,{},{pageCount:n,pageSize:l},n)):X(d,s,r,{},{pageCount:n,pageSize:l},n),o.b.success("\u7f16\u8f91\u6210\u529f")})))}function ie(e,t){Y()(t[e.linkField]),o.b.success("\u590d\u5236\u6210\u529f")}function le(e,t){window.open(t[e.linkField])}function ce(e,t,a,n,r,i,l,c){var o=this;return e.map((function(e){"update"===e.status?(e.type="primary",e.icon=p.a.createElement(K.a,null),e.do=ae.bind(o,t,a,n,r,i)):"del"===e.status?(e.type="danger",e.icon=p.a.createElement(J.a,null),e.do=ne.bind(o,t,l,c)):"copy"===e.status?(e.type="",e.icon=p.a.createElement(M.a,null),e.do=ie.bind(o)):"preview"===e.status?(e.type="dashed",e.icon=p.a.createElement(z.a,null),e.do=le.bind(o)):"insert"===e.status?(e.type="primary",e.icon=p.a.createElement(Q.a,null),e.do=ee.bind(o,t,a,n,r,i)):(e.type="primary",e.icon="folder-open",e.do=te.bind(o,a,i))})),e}function oe(){return(oe=Object(c.a)(r.a.mark((function e(t,a){var n,i,l,c,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sourceApi,i=n.url,l=n.method,c=n.data,e.next=3,Object(g.f)(W({url:i,method:l},c));case 3:if("0"===(o=e.sent).code){e.next=6;break}return e.abrupt("return");case 6:u=(u=o.data).map((function(e){return W({title:e.name,key:e.id},e)})),u=Object(P.a)(u,0,{id:"id",parentId:"parentId",name:"name"}),t.options=u,a((function(e){return!e}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.a=p.a.forwardRef((function(e,t){var a=Object(d.useState)(""),n=Object(l.a)(a,2),r=n[0],c=n[1],o=Object(d.useState)([]),u=Object(l.a)(o,2),s=u[0],m=u[1],f=Object(d.useState)(!1),b=Object(l.a)(f,2),O=b[0],y=b[1],h=Object(d.useState)(!1),j=Object(l.a)(h,2),g=j[0],v=j[1],w=Object(d.useState)(0),E=Object(l.a)(w,2),k=E[0],C=E[1],x=Object(d.useState)(1),N=Object(l.a)(x,2),F=N[0],R=N[1],I=Object(d.useState)({}),L=Object(l.a)(I,2),T=L[0],U=L[1],P=Object(d.useState)(0),V=Object(l.a)(P,2),Y=(V[0],V[1]),K=Object(d.useRef)(null),J=e.modalList,M=e.actions,z=e.rowSelection,Q=e.components,G=e.onRow,W=e.pagination,Z=e.onExpand,te=e.expandedRowRender,ae=e.onExpandedRowsChange,ne=e.expandedRowKeys,ie=e.defaultExpandedRowKeys,le=e.labelCol,ue=e.wrapperCol,se=[],de=J.filter((function(e){return e.visible})),pe=J.filter((function(e){return e.isUpdate&&e.updateVisible})),me=M.filter((function(e){return e.showColumn})),fe=function(e,t){var a=!1,n=!0,r=!1,i=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var o=l.value;o.isSearch&&(a=o.isSearch)}}catch(u){r=!0,i=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return a?t:t.filter((function(e){return"query"!==e.status&&!e.showColumn}))}(J,M);return J.length>0&&(se=D(de,ce(me,e,y,v,c,U,m,C),Y)),Object(d.useEffect)((function(){(H(m,e,C),J.some((function(e){return e.doApi})))&&function(e,t){oe.apply(this,arguments)}(J.filter((function(e){return e.doApi}))[0],Y)}),[]),Object(d.useImperativeHandle)(t,(function(){return{dataSource:s,setDataSource:m}})),p.a.createElement("div",{className:"cm-bc-white"},O?p.a.createElement("div",{className:"cm-p-02"},p.a.createElement("div",{onClick:function(){return function(e,t,a,n){t(!1),X(e,a,n,{})}(C,y,m,e)},className:"cm-flex cm-ai-bl cm-cursor-p cm-border-bottom-ddd cm-ptb-01 cm-c-666"},p.a.createElement("img",{src:q.a,alt:"",className:"cm-mr-01 cm-img-01"}),p.a.createElement("span",null,"\u8fd4\u56de")),p.a.createElement("div",{className:"cm-c-333 cm-fw-bold cm-fs-020 cm-mtb-01"},r),p.a.createElement(A,{option:T,title:r,modalList:pe,submit:function(){return re(r,T,O,F,e,R,10,y,v,m,C)}})):p.a.createElement("div",{className:"cm-p-02"},p.a.createElement("div",{className:"cm-flex cm-mb-02 cm-jc-sb"},p.a.createElement(S,{actions:fe,modalList:J,option:T,ref:K,setCurrent:R,getList:X.bind(this,C,m,e),openAddModal:ee.bind(this,e,y,v,c,U)})),ne?p.a.createElement(i.a,{columns:se,rowSelection:z,dataSource:s,components:Q,onExpand:Z,expandedRowRender:te,expandedRowKeys:ne||[],defaultExpandedRowKeys:ie||[],onExpandedRowsChange:ae,onRow:G,rowKey:function(e){return e[J[0].field]},footer:function(){return k?_(k):null},pagination:!1===W?W:{current:F,onChange:$.bind(this,K,e,C,m,R,10),total:k}}):p.a.createElement(i.a,{columns:se,rowSelection:z,dataSource:s,components:Q,onExpand:Z,expandedRowRender:te,onExpandedRowsChange:ae,onRow:G,rowKey:function(e){return e[J[0].field]},footer:function(){return k?_(k):null},pagination:!1===W?W:{current:F,onChange:$.bind(this,K,e,C,m,R,10),total:k}})),p.a.createElement(B,{title:r,visible:g,labelCol:le,wrapperCol:ue,onOk:function(){return re(r,T,O,F,e,R,10,y,v,m)},option:T,onCancel:function(){return v(!1)},setRefresh:Y,modalList:pe}))}))},732:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKCAYAAAB4zEQNAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAB6ADAAQAAAABAAAACgAAAAApxhvnAAAAoElEQVQYGWNkwALS0tLkGBkZ5zOhy2VkZEQDxS7+////GgtMMjMzU/Dfv3/TgYL2QF2RM2fO3AHWmZ6e7vz3799LQIVsLCwsOiAJkCZGoPmdQJUZQHYBUHA+SBAGMOyESYBoRhABMhZo1wKgCaeAxqZNnTr1LUgcrBNo3F5mZmY9IP83EFwGKvYASYJ1ghgwAPIK0NVTgPwlGJIgRbBAAAAQzjnneSDv7wAAAABJRU5ErkJggg=="},756:function(e,t,a){"use strict";a.r(t);var n,r,i,l,c,o,u=a(45),s=a(0),d=a.n(s),p=a(731),m=[{label:"\u6587\u7ae0ID",field:"id",renderType:"Input",visible:!1,writable:!0,isUpdate:!0,updateField:"id"},{label:"\u6587\u7ae0\u6807\u9898",field:"title",renderType:"Input",visible:!0,require:!0,isUpdate:!0,updateField:"title",isSearch:!0,searchField:"title",updateWritable:!0,updateVisible:!0},(n={label:"\u6240\u5c5e\u671f\u520a",require:!0,field:"periodicalName"},Object(u.a)(n,"require",!0),Object(u.a)(n,"updateField","periodicalId"),Object(u.a)(n,"renderType","Select"),Object(u.a)(n,"visible",!0),Object(u.a)(n,"writable",!0),Object(u.a)(n,"isUpdate",!0),Object(u.a)(n,"updateField","periodicalId"),Object(u.a)(n,"updateWritable",!0),Object(u.a)(n,"updateVisible",!0),Object(u.a)(n,"isSearch",!0),Object(u.a)(n,"searchField","periodicalId"),Object(u.a)(n,"keyValueField",["periodicalId","periodicalName"]),Object(u.a)(n,"sourceApi",{url:"/admin/weeksPeriodical/periodicalList",method:"get"}),n),(r={label:"\u6240\u5c5e\u680f\u76ee",require:!0,field:"columnName",updateField:"columnId",isSearch:!0,searchField:"columnId",renderType:"Select"},Object(u.a)(r,"require",!0),Object(u.a)(r,"visible",!0),Object(u.a)(r,"writable",!0),Object(u.a)(r,"isUpdate",!0),Object(u.a)(r,"updateField","columnId"),Object(u.a)(r,"updateWritable",!0),Object(u.a)(r,"updateVisible",!0),Object(u.a)(r,"keyValueField",["columnId","columnName"]),Object(u.a)(r,"sourceApi",{url:"/admin/weeksPeriodicalColumn/columnList",method:"post",data:{periodicalId:0}}),r),{label:"\u66f4\u65b0\u65f6\u95f4",field:"updateTime",renderType:"Picker",format:"YYYY-MM-DD",visible:!0,isUpdate:!1},(i={label:"\u6587\u7ae0\u5185\u5bb9",field:"content",require:!0,updateField:"content",writable:!0,renderType:"Editor",visible:!1,width:250,isUpdate:!0},Object(u.a)(i,"updateField","content"),Object(u.a)(i,"updateWritable",!0),Object(u.a)(i,"updateVisible",!0),i),(l={label:"\u6587\u7ae0\u6982\u8ff0",field:"summarize",updateField:"summarize",writable:!0,renderType:"Textarea",require:!0,visible:!1,width:360,isUpdate:!0},Object(u.a)(l,"updateField","summarize"),Object(u.a)(l,"updateWritable",!0),Object(u.a)(l,"updateVisible",!0),l),(c={label:" \u5916\u90e8\u94fe\u63a5",field:"url",updateField:"url",writable:!0,renderType:"Input",visible:!1,width:250,isUpdate:!0},Object(u.a)(c,"updateField","url"),Object(u.a)(c,"updateWritable",!1),Object(u.a)(c,"updateVisible",!1),Object(u.a)(c,"help","\u8bf7\u8f93\u5165\u6709\u6548\u7684url"),c),(o={label:"\u6392\u5e8f",field:"sort",require:!0,updateField:"sort",writable:!0,renderType:"InputNumber"},Object(u.a)(o,"require",!0),Object(u.a)(o,"visible",!0),Object(u.a)(o,"isUpdate",!0),Object(u.a)(o,"updateField","sort"),Object(u.a)(o,"updateWritable",!0),Object(u.a)(o,"updateVisible",!0),o)],f=[{status:"update",name:"\u7f16\u8f91",url:"/admin/weeksArticle/update",method:"post",showColumn:!0},{status:"copy",name:"\u590d\u5236\u94fe\u63a5",url:"",method:"",linkField:"detailPageUrl",showColumn:!0},{status:"add",name:"\u65b0\u589e",url:"/admin/weeksArticle/add",method:"post",showColumn:!1},{status:"query",name:"\u67e5\u8be2",url:"/admin/weeksArticle/listByPage",method:"post",extraField:"list",showColumn:!1}];t.default=function(){return d.a.createElement(p.a,{actions:f,modalList:m,showDetail:!0})}}}]);